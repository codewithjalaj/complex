(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{217:function(e,a,t){"use strict";t.r(a);var s=t(0),r=t.n(s),c=t(14),l=t(15),n=t(2),o=t.n(n),i=t(17);a.default=()=>{const[e,a]=Object(l.a)({searchTerm:"",display:"neither",results:[],requestCount:0}),t=Object(s.useContext)(c.a);function n(e){27==e.keyCode&&t({type:"closeSearch"})}return Object(s.useEffect)(()=>(document.addEventListener("keyup",n),()=>document.removeEventListener("keyup",n)),[]),Object(s.useEffect)(()=>{if(e.searchTerm.trim()){a(e=>{e.display="loading"});const e=setTimeout(()=>{a(e=>{e.requestCount++})},750);return()=>clearTimeout(e)}a(e=>{e.display="neither"})},[e.searchTerm]),Object(s.useEffect)(()=>{if(e.requestCount){const t=o.a.CancelToken.source();return async function(){try{const s=await o.a.post("/search",{searchTerm:e.searchTerm},{cancelToken:t.token});a(e=>{e.results=s.data,e.display="results"})}catch(e){console.log(e)}}(),()=>t.cancel()}},[e.requestCount]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search-overlay-top shadow-sm"},r.a.createElement("div",{className:"container container--narrow"},r.a.createElement("label",{htmlFor:"live-search-field",className:"search-overlay-icon"},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement("input",{onChange:function(e){const t=e.target.value;a(e=>{e.searchTerm=t})},autoFocus:!0,type:"text",autoComplete:"off",id:"live-search-field",className:"live-search-field",placeholder:"What are you interested in?"}),r.a.createElement("span",{onClick:e=>t({type:"closeSearch"}),className:"close-live-search"},r.a.createElement("i",{className:"fas fa-times-circle"})))),r.a.createElement("div",{className:"search-overlay-bottom"},r.a.createElement("div",{className:"container container--narrow py-3"},r.a.createElement("div",{className:"circle-loader "+("loading"==e.display?"circle-loader--visible":"")}),r.a.createElement("div",{className:"live-search-results "+("results"==e.display?"live-search-results--visible":"")},Boolean(e.results.length)&&r.a.createElement("div",{className:"list-group shadow-sm"},r.a.createElement("div",{className:"list-group-item active"},r.a.createElement("strong",null,"Search Results")," (",e.results.length," ","item"+(e.results.length>1?"s":"")," found)"),e.results.map(e=>r.a.createElement(i.a,{post:e,key:e._id,onClick:()=>t({type:"closeSearch"})}))),!Boolean(e.results.length)&&r.a.createElement("p",{className:"alert alert-danger shadow-sm text-center"},"Sorry, no post matched that search query.")))))}}}]);